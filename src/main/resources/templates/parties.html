<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>파티원 모집</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/document/css/layout.css}" />
    <link rel="stylesheet" th:href="@{/document/css/parties.css}" />
</head>
<body>

<div th:replace="~{fragments/header :: header}"></div>

<div class="container mt-4">

    <!-- 제목 + 글쓰기 버튼 -->
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h1 class="page-title">파티원 모집</h1>
    </div>

    <!-- 탭 + 글쓰기 버튼 행 -->
    <div class="d-flex justify-content-between align-items-center mb-4 tab-header">
        <div class="tab-menu">
            <a th:href="@{/parties(category='배달')}" th:classappend="${category} == '배달' ? ' active' : ''" class="tab">배달</a>
            <a th:href="@{/parties(category='외식')}" th:classappend="${category} == '외식' ? ' active' : ''" class="tab">외식</a>
            <a th:href="@{/parties(category='도시락')}" th:classappend="${category} == '도시락' ? ' active' : ''" class="tab">도시락</a>
            <a th:href="@{/parties(category='내기')}" th:classappend="${category} == '내기' ? ' active' : ''" class="tab">내기</a>
        </div>

        <a th:href="@{/parties/new}" class="btn btn-write">글쓰기</a>
    </div>

    <!-- 파티 카드 목록 -->
    <div class="tab-content">
        <ul class="list-unstyled">
            <li th:each="party : ${parties}" class="party-card">
                <a th:href="@{'/parties/' + ${party.id}}" class="card-link">
                    <h5 th:text="${party.title}"></h5>
                    <p>
                        참여 인원: <span th:text="${party.currentPeople}"></span> / <span th:text="${party.limitPeople}"></span><br />
                        마감 시간: <span th:text="${#dates.format(party.finishedAt, 'yyyy-MM-dd HH:mm')}"></span><br />
                        <span th:if="${party.limitPrice > 0}">최소 주문 금액: <span th:text="${party.limitPrice}"></span>원</span><br />
                        <span th:unless="${party.isOpen}" class="closed-party">(마감)</span>
                    </p>
                </a>
            </li>
        </ul>
    </div>
</div>

<div th:replace="~{fragments/footer :: footer}"></div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
